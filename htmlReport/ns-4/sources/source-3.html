


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > ManageCalendarsFragment</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.example.sharedcalendar.ui</a>
</div>

<h1>Coverage Summary for Class: ManageCalendarsFragment (com.example.sharedcalendar.ui)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ManageCalendarsFragment</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (2/4)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    30%
  </span>
  <span class="absValue">
    (3/10)
  </span>
</td>
</tr>
  <tr>
    <td class="name">ManageCalendarsFragment$Companion</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$onCreate$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$onCreateView$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$onCreateView$1$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/5)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$onCreateView$1$1$1$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$special$$inlined$viewModels$default$1</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$special$$inlined$viewModels$default$2</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$special$$inlined$viewModels$default$3</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$special$$inlined$viewModels$default$4</td>
  </tr>
  <tr>
    <td class="name">ManageCalendarsFragment$special$$inlined$viewModels$default$5</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    33.3%
  </span>
  <span class="absValue">
    (3/9)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/26)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    18.2%
  </span>
  <span class="absValue">
    (4/22)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.example.sharedcalendar.ui
&nbsp;
&nbsp;import android.os.Bundle
&nbsp;import android.util.Log
&nbsp;import android.view.LayoutInflater
&nbsp;import android.view.View
&nbsp;import android.view.ViewGroup
&nbsp;import androidx.annotation.StringRes
&nbsp;import androidx.compose.animation.AnimatedVisibility
&nbsp;import androidx.compose.animation.slideInVertically
&nbsp;import androidx.compose.animation.slideOutVertically
&nbsp;import androidx.compose.foundation.clickable
&nbsp;import androidx.compose.foundation.layout.Arrangement
&nbsp;import androidx.compose.foundation.layout.Column
&nbsp;import androidx.compose.foundation.layout.fillMaxSize
&nbsp;import androidx.compose.foundation.layout.height
&nbsp;import androidx.compose.foundation.layout.padding
&nbsp;import androidx.compose.foundation.lazy.LazyColumn
&nbsp;import androidx.compose.material.icons.Icons
&nbsp;import androidx.compose.material.icons.automirrored.filled.ArrowBack
&nbsp;import androidx.compose.material.icons.filled.Add
&nbsp;import androidx.compose.material3.ExperimentalMaterial3Api
&nbsp;import androidx.compose.material3.ExtendedFloatingActionButton
&nbsp;import androidx.compose.material3.FloatingActionButtonDefaults
&nbsp;import androidx.compose.material3.HorizontalDivider
&nbsp;import androidx.compose.material3.Icon
&nbsp;import androidx.compose.material3.IconButton
&nbsp;import androidx.compose.material3.ListItem
&nbsp;import androidx.compose.material3.ListItemDefaults
&nbsp;import androidx.compose.material3.MaterialTheme
&nbsp;import androidx.compose.material3.Scaffold
&nbsp;import androidx.compose.material3.Surface
&nbsp;import androidx.compose.material3.Text
&nbsp;import androidx.compose.material3.TopAppBar
&nbsp;import androidx.compose.material3.TopAppBarDefaults
&nbsp;import androidx.compose.runtime.Composable
&nbsp;import androidx.compose.runtime.collectAsState
&nbsp;import androidx.compose.runtime.getValue
&nbsp;import androidx.compose.runtime.livedata.observeAsState
&nbsp;import androidx.compose.runtime.mutableStateOf
&nbsp;import androidx.compose.runtime.saveable.rememberSaveable
&nbsp;import androidx.compose.ui.Modifier
&nbsp;import androidx.compose.ui.graphics.Color
&nbsp;import androidx.compose.ui.graphics.vector.ImageVector
&nbsp;import androidx.compose.ui.platform.ComposeView
&nbsp;import androidx.compose.ui.platform.LocalContext
&nbsp;import androidx.compose.ui.res.stringResource
&nbsp;import androidx.compose.ui.res.vectorResource
&nbsp;import androidx.compose.ui.text.style.TextOverflow
&nbsp;import androidx.compose.ui.unit.dp
&nbsp;import androidx.fragment.app.Fragment
&nbsp;import androidx.fragment.app.viewModels
&nbsp;import androidx.lifecycle.ViewModelProvider
&nbsp;import androidx.lifecycle.viewmodel.compose.viewModel
&nbsp;import androidx.navigation.NavController
&nbsp;import androidx.navigation.NavHostController
&nbsp;import androidx.navigation.compose.NavHost
&nbsp;import androidx.navigation.compose.composable
&nbsp;import androidx.navigation.compose.currentBackStackEntryAsState
&nbsp;import androidx.navigation.compose.rememberNavController
&nbsp;import com.example.sharedcalendar.FirebaseViewModel
&nbsp;import com.example.sharedcalendar.HexToJetpackColor
&nbsp;import com.example.sharedcalendar.R
&nbsp;import com.example.sharedcalendar.feature.editcalendar.EditCalendarScreen
&nbsp;import com.example.sharedcalendar.feature.editcalendar.ViewCalendarScreen
&nbsp;import com.example.sharedcalendar.models.Calendar
&nbsp;
&nbsp;enum class ManageCalendarScreens(@StringRes val title: Int) {
&nbsp;    Select(title = R.string.select_calendar_screen),
&nbsp;    Edit(title = R.string.edit_calendar_screen), View(
&nbsp;        title = R.string.view_calendar_screen
&nbsp;    ),
&nbsp;    Create(title = R.string.create_calendar_screen),
&nbsp;}
&nbsp;
<b class="fc">&nbsp;class ManageCalendarsFragment : Fragment() {</b>
&nbsp;    private lateinit var firebaseViewModel: FirebaseViewModel
<b class="fc">&nbsp;    private val viewModel by viewModels&lt;ManageCalendarsViewModel&gt;()</b>
&nbsp;    override fun onCreate(savedInstanceState: Bundle?) {
<b class="nc">&nbsp;        super.onCreate(savedInstanceState)</b>
<b class="nc">&nbsp;        firebaseViewModel = ViewModelProvider(requireActivity())[FirebaseViewModel::class.java]</b>
<b class="nc">&nbsp;        firebaseViewModel.calendars.observe(requireActivity()) {</b>
<b class="nc">&nbsp;            firebaseViewModel.getShares(it)</b>
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    override fun onCreateView(
&nbsp;        inflater: LayoutInflater,
&nbsp;        container: ViewGroup?,
&nbsp;        savedInstanceState: Bundle?
&nbsp;    ): View {
<b class="nc">&nbsp;        return ComposeView(requireContext()).apply {</b>
<b class="nc">&nbsp;            setContent {</b>
<b class="nc">&nbsp;                MaterialTheme {</b>
<b class="nc">&nbsp;                    Surface(</b>
<b class="nc">&nbsp;                        modifier = Modifier.fillMaxSize(),</b>
<b class="nc">&nbsp;                        color = MaterialTheme.colorScheme.background</b>
<b class="nc">&nbsp;                    ) {</b>
<b class="nc">&nbsp;                        ManageCalendarScreen(</b>
<b class="nc">&nbsp;                            firebaseViewModel, viewModel</b>
<b class="nc">&nbsp;                        )</b>
&nbsp;
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                }</b>
&nbsp;
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;//        return super.onCreateView(inflater, container, savedInstanceState)
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    companion object {</b>
<b class="fc">&nbsp;        private val TAG: String? = ManageCalendarsFragment::class.java.name</b>
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;
&nbsp;@Composable
&nbsp;fun DoseFAB(navController: NavController) {
&nbsp;    ExtendedFloatingActionButton(
&nbsp;        text = { Text(text = &quot;Add Calendar&quot;) },
&nbsp;        icon = {
&nbsp;            Icon(
&nbsp;                imageVector = Icons.Default.Add, contentDescription = &quot;add&quot;
&nbsp;            )
&nbsp;        },
&nbsp;        onClick = {
&nbsp;            navController.navigate(ManageCalendarScreens.Create.name)
&nbsp;        },
&nbsp;        elevation = FloatingActionButtonDefaults.elevation(0.dp, 0.dp),
&nbsp;        containerColor = MaterialTheme.colorScheme.tertiary
&nbsp;    )
&nbsp;}
&nbsp;
&nbsp;@Composable
&nbsp;fun ManageCalendarScreen(
&nbsp;    firebaseViewModel: FirebaseViewModel,
&nbsp;    viewModel: ManageCalendarsViewModel,
&nbsp;    navController: NavHostController = rememberNavController(),
&nbsp;) {
&nbsp;    // Get current back stack entry
&nbsp;    val backStackEntry by navController.currentBackStackEntryAsState()
&nbsp;    val fabVisibility = rememberSaveable { (mutableStateOf(true)) }
&nbsp;    // Get the name of the current screen
&nbsp;    val currentScreen = ManageCalendarScreens.valueOf(
&nbsp;        backStackEntry?.destination?.route ?: ManageCalendarScreens.Select.name
&nbsp;    )
&nbsp;    Scaffold(
&nbsp;        containerColor = Color.Transparent,
&nbsp;        contentColor = MaterialTheme.colorScheme.onBackground,
&nbsp;        floatingActionButton = {
&nbsp;
&nbsp;            AnimatedVisibility(visible = fabVisibility.value,
&nbsp;                enter = slideInVertically(initialOffsetY = { it }),
&nbsp;                exit = slideOutVertically(targetOffsetY = { it }),
&nbsp;                content = {
&nbsp;//                    DoseFAB(navController, analyticsHelper)
&nbsp;                })
&nbsp;        },
&nbsp;        topBar = {
&nbsp;            ManageCalendarsAppBar(
&nbsp;                currentScreen = currentScreen,
&nbsp;                canNavigateBack = navController.previousBackStackEntry != null,
&nbsp;                navigateUp = { navController.navigateUp() }
&nbsp;            )
&nbsp;        }) { innerPadding -&gt;
&nbsp;        val calendar by viewModel.calendar.collectAsState()
&nbsp;
&nbsp;        NavHost(
&nbsp;            navController = navController,
&nbsp;            startDestination = ManageCalendarScreens.Select.name,
&nbsp;            modifier = Modifier.padding(innerPadding)
&nbsp;        ) {
&nbsp;            composable(route = ManageCalendarScreens.Select.name) {
&nbsp;                SelectCalendarScreen(
&nbsp;                    modifier = Modifier.fillMaxSize(),
&nbsp;                    firebaseViewModel = firebaseViewModel,
&nbsp;                    onItemClicked = {
&nbsp;                        viewModel.setCalendar(it)
&nbsp;                        navController.navigate(ManageCalendarScreens.View.name)
&nbsp;                    }
&nbsp;                )
&nbsp;            }
&nbsp;            composable(route = ManageCalendarScreens.View.name) {
&nbsp;                val context = LocalContext.current
&nbsp;                ViewCalendarScreen(
&nbsp;                    modifier = Modifier.fillMaxSize(), calendar = calendar, onEditButtonClicked = {
&nbsp;                        viewModel.setCalendar(it)
&nbsp;                        navController.navigate(ManageCalendarScreens.Edit.name)
&nbsp;                    }, firebaseViewModel
&nbsp;                )
&nbsp;            }
&nbsp;            composable(route = ManageCalendarScreens.Edit.name) {
&nbsp;                EditCalendarScreen(modifier = Modifier.fillMaxSize(),
&nbsp;                    calendar = calendar,
&nbsp;                    firebaseViewModel,
&nbsp;                    onBackButtonClicked = {
&nbsp;                        navController.navigateUp()
&nbsp;                    })
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;/**
&nbsp; * Composable that displays the topBar and displays back button if back navigation is possible.
&nbsp; */
&nbsp;@OptIn(ExperimentalMaterial3Api::class)
&nbsp;@Composable
&nbsp;fun ManageCalendarsAppBar(
&nbsp;    currentScreen: ManageCalendarScreens,
&nbsp;    canNavigateBack: Boolean,
&nbsp;    navigateUp: () -&gt; Unit,
&nbsp;    modifier: Modifier = Modifier,
&nbsp;) {
&nbsp;    TopAppBar(title = { Text(stringResource(currentScreen.title)) },
&nbsp;        colors = TopAppBarDefaults.mediumTopAppBarColors(
&nbsp;            containerColor = MaterialTheme.colorScheme.primaryContainer
&nbsp;        ),
&nbsp;        modifier = modifier,
&nbsp;        navigationIcon = {
&nbsp;            if (canNavigateBack) {
&nbsp;                IconButton(onClick = navigateUp) {
&nbsp;                    Icon(
&nbsp;                        imageVector = Icons.AutoMirrored.Filled.ArrowBack,
&nbsp;                        contentDescription = &quot;Back Button&quot;
&nbsp;                    )
&nbsp;                }
&nbsp;            }
&nbsp;        })
&nbsp;}
&nbsp;
&nbsp;@Composable
&nbsp;fun ProfileProperty(label: String, value: String) {
&nbsp;    Column {
&nbsp;        HorizontalDivider(modifier = Modifier.padding(bottom = 4.dp))
&nbsp;        Text(
&nbsp;            text = label,
&nbsp;            modifier = Modifier.height(24.dp),
&nbsp;            style = MaterialTheme.typography.bodyLarge,
&nbsp;        )
&nbsp;        Text(
&nbsp;            text = value,
&nbsp;            modifier = Modifier.height(24.dp),
&nbsp;            style = MaterialTheme.typography.bodyMedium, overflow = TextOverflow.Visible
&nbsp;        )
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;
&nbsp;@Composable
&nbsp;fun CalendarListItem(
&nbsp;    calendar: Calendar,
&nbsp;    onItemClicked: (calendar: Calendar) -&gt; Unit = {
&nbsp;        ManageCalendarsViewModel().setCalendar(
&nbsp;            calendar
&nbsp;        )
&nbsp;    },
&nbsp;) {
&nbsp;    ListItem(
&nbsp;        headlineContent = {
&nbsp;            Text(
&nbsp;                text = calendar.name,
&nbsp;                modifier = Modifier.padding(horizontal = 16.dp),
&nbsp;//                style = MaterialTheme.typography.bodyLarge
&nbsp;            )
&nbsp;        },
&nbsp;        leadingContent = {
&nbsp;            Icon(ImageVector.vectorResource(R.drawable.ic_baseline_circle_24),
&nbsp;                contentDescription = null,
&nbsp;                tint = calendar.color?.let { HexToJetpackColor.getColor(it) } ?: Color.Gray)
&nbsp;        },
&nbsp;        modifier = Modifier.clickable { onItemClicked(calendar) },
&nbsp;        colors = ListItemDefaults.colors(containerColor = Color.Transparent),
&nbsp;    )
&nbsp;    HorizontalDivider()
&nbsp;}
&nbsp;
&nbsp;@Composable
&nbsp;fun SelectCalendarList(
&nbsp;    calendars: List&lt;Calendar&gt;, onItemClicked: (calendar: Calendar) -&gt; Unit, modifier: Modifier
&nbsp;) {
&nbsp;    LazyColumn(
&nbsp;        modifier = modifier, verticalArrangement = Arrangement.spacedBy(8.dp)
&nbsp;    ) {
&nbsp;        items(
&nbsp;            count = calendars.count(), key = { i -&gt; calendars[i].id!! },
&nbsp;        ) { i -&gt;
&nbsp;            CalendarListItem(calendars[i], onItemClicked)
&nbsp;        }
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;@Composable
&nbsp;fun SelectCalendarScreen(
&nbsp;    modifier: Modifier = Modifier,
&nbsp;    firebaseViewModel: FirebaseViewModel = viewModel(),
&nbsp;    onItemClicked: (calendar: Calendar) -&gt; Unit = { },
&nbsp;) {
&nbsp;    val calendars = firebaseViewModel.calendars.observeAsState()
&nbsp;    // API call
&nbsp;//    LaunchedEffect(key1 = Unit) {
&nbsp;//        firebaseViewModel.getCalendars()
&nbsp;////        firebaseViewModel.userShares.observe() {
&nbsp;////            firebaseViewModel.getCalendars()
&nbsp;////        }
&nbsp;//    }
&nbsp;//    val calendars = firebaseViewModel.getStaticCalendars()
&nbsp;
&nbsp;    Log.i(&quot;Calendar List&quot;, calendars.toString())
&nbsp;
&nbsp;    calendars.value?.let {
&nbsp;        SelectCalendarList(
&nbsp;            calendars = it.toList(), onItemClicked = onItemClicked, modifier = modifier
&nbsp;        )
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-05-12 02:48</div>
</div>
</body>
</html>
